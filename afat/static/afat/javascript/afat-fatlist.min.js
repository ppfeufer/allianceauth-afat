$(document).ready(()=>{'use strict';const t=afatSettings.dataTable.language,a=[{data:'fleet_name'},{data:'fleet_type'},{data:'doctrine'},{data:'creator_name'},{data:'fleet_time',render:{display:t=>moment(t.time).utc().format(AFAT_DATETIME_FORMAT),_:'timestamp'}},{data:'fats_number'}],e=[{targets:[5],createdCell:t=>{$(t).addClass('text-end')}}];!0===afatSettings.permissions.addFatLink||!0===afatSettings.permissions.manageAfat?(a.push({data:'actions',render:t=>t}),e.push({targets:[6],orderable:!1,createdCell:t=>{$(t).addClass('text-end')}},{targets:[7,8],visible:!1})):e.push({targets:[6,7],visible:!1}),a.push({data:'via_esi'},{data:'hash'});const n=$('#link-list');fetchGet({url:afatSettings.url.linkList}).then(s=>{n.DataTable({language:t,data:s,columns:a,columnDefs:e,order:[[4,'desc']],filterDropDown:{columns:[{idx:1},{idx:7,title:afatSettings.translation.dataTable.filter.viaEsi}],autoSize:!1,bootstrap:!0,bootstrap_version:5}})}).catch(t=>{console.error('Error fetching link list:',t)});const s=6e4;let o=Date.now()+s;const i=()=>{const t=Date.now()-o,a=window.location.pathname+window.location.search+window.location.hash;t>s&&(a.startsWith('/')?window.location.replace(a):console.error('Invalid redirect URL')),fetchGet({url:afatSettings.url.linkList}).then(t=>{n.DataTable().clear().rows.add(t).draw()}).catch(t=>{console.error('Error fetching updated data:',t)}),o+=s,setTimeout(i,Math.max(0,s-t))};setTimeout(i,s);const l=$(afatSettings.modal.cancelEsiFleetModal.element);manageModal(l);const r=$(afatSettings.modal.deleteFatLinkModal.element);manageModal(r)});
//# sourceMappingURL=afat-fatlist.min.js.map